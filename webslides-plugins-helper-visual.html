<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>WebSlides Plugins â€“ Visual Helper</title>
<style>
  :root {
    --bg:#0a0a0a; --card:#121212; --muted:#a1a1aa; --border:#2a2a2a; --text:#f6f6f6; --soft:#1b1b1b;
    --accent:#e5e7eb;
  }
  [data-theme="light"] {
    --bg:#fafafa; --card:#ffffff; --muted:#4b5563; --border:#e5e7eb; --text:#0b0b0b; --soft:#f3f4f6;
    --accent:#111827;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";background:var(--bg);color:var(--text)}
  .container{max-width:1200px;margin:0 auto;padding:24px}
  header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:10px}
  h1{margin:0;font-size:clamp(22px,2.4vw,34px)}
  .muted{color:var(--muted)}
  .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  input[type="search"]{background:var(--soft);border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:12px;width:320px;outline:none}
  .btn{background:var(--soft);border:1px solid var(--border);color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer}
  .btn:hover{filter:brightness(1.05)}
  .chip{font-size:12px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:var(--soft);cursor:pointer}
  .chip.active{outline:2px solid #6366f1}
  .grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:16px;margin-top:14px}
  @media(min-width:900px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
  @media(min-width:1200px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
  .thumb{height:120px;background:linear-gradient(135deg,#0ea5e9 0%,#6366f1 50%,#22c55e 100%);display:grid;place-items:center;color:white;font-weight:700;letter-spacing:.08em}
  [data-theme="light"] .thumb{color:white}
  .thumb small{opacity:.9;font-weight:600}
  .content{padding:14px}
  .title{display:flex;justify-content:space-between;gap:8px;align-items:flex-start}
  .title h3{margin:0;font-size:18px}
  .tag{display:inline-block;background:var(--soft);border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:11px;margin-left:6px}
  .desc{color:var(--muted);font-size:14px;margin:6px 0 10px;min-height:40px}
  .rowlabel{margin-top:6px;color:var(--muted);font-size:11px;text-transform:uppercase;letter-spacing:.06em}
  .snippet{background:var(--soft);border:1px solid var(--border);border-radius:12px;overflow:hidden;margin:6px 0}
  .snippet .bar{display:flex;justify-content:space-between;align-items:center;padding:6px 8px;color:var(--muted);font-size:12px;border-bottom:1px solid var(--border)}
  .snippet pre{margin:0;padding:10px 12px;font-size:12px;color:var(--text);overflow:auto;white-space:pre-wrap}
  .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .example{background:var(--soft);border:1px solid var(--border);border-radius:12px;padding:10px 12px;color:var(--text);font-size:12px;overflow:auto}
  .playground{background:var(--soft);border:1px dashed var(--border);border-radius:12px;padding:10px 12px;color:var(--text);font-size:13px;margin-top:8px}
  .playground input{width:100%;padding:8px;border-radius:8px;border:1px solid var(--border);background:var(--card);color:var(--text)}
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:1000}
  .modal .box{width:min(100%,1000px);background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden}
  .modal header{padding:12px 14px;border-bottom:1px solid var(--border)}
  .modal iframe{width:100%;height:520px;background:black;display:block}
  .modal footer{padding:10px 14px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}
  .footer{margin-top:12px;color:var(--muted);font-size:13px}
  .qr{font-size:12px;color:var(--muted) }
  canvas.qr{background:white;border-radius:8px}
  .empty{color:var(--muted);text-align:center;padding:24px;border:1px dashed var(--border);border-radius:12px;margin-top:16px}
</style>
</head>
<body>
<div class="container">
  <header>
    <div>
      <h1>WebSlides Plugins â€“ Visual Helper</h1>
      <div class="muted">Schneller Zugriff auf Snippets, Beispiele, Live-Preview &amp; kleine Playgrounds.</div>
    </div>
    <div class="toolbar">
      <input id="search" type="search" placeholder="Suchen (Icons, Animation, Code...)">
      <button id="theme" class="btn" title="Hell/Dunkel umschalten">ðŸŒ“Â Theme</button>
    </div>
  </header>

  <div class="toolbar" style="margin:4px 0 10px">
    <span class="muted" style="font-size:12px">Filter:</span>
    <button class="chip active" data-filter="all">Alle</button>
    <button class="chip" data-filter="core">Core</button>
    <button class="chip" data-filter="icons">Icons</button>
    <button class="chip" data-filter="animation">Animation</button>
    <button class="chip" data-filter="code">Code</button>
    <button class="chip" data-filter="video">Video</button>
    <button class="chip" data-filter="charts">Charts</button>
    <button class="chip" data-filter="lottie">Lottie</button>
  </div>

  <div id="grid" class="grid"></div>
  <div id="empty" class="empty" style="display:none">Keine Treffer. Suchbegriff/Filter anpassen.</div>

  <div class="footer">
    Tipp: Diese Datei kann im selben Repo wie deine PrÃ¤sentation liegen. Ã–ffne sie unter <code>/webslides-plugins-helper.html</code> und kopiere Snippets direkt in deine <code>index.html</code>.
    <span class="qr" id="qrWrap" style="display:block;margin-top:8px">QR fÃ¼r diese Seite (zum Testen auf dem Handy): <canvas id="qrc" class="qr" width="110" height="110"></canvas></span>
  </div>
</div>

<div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Preview">
  <div class="box">
    <header>
      <strong id="modal-title">Preview</strong>
    </header>
    <iframe id="modal-frame" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
    <footer>
      <button id="close" class="btn">SchlieÃŸen</button>
    </footer>
  </div>
</div>

<script>
// --- Data model with categories & thumbnails
const DATA = [
  {
    id: "core",
    name: "WebSlides Core",
    tag: "Core",
    categories: ["core"],
    thumb: "WS",
    description: "Aktiviert Pfeiltasten-, Touch- und Klick-Navigation. Lade webslides.js und initialisiere WebSlides.",
    css: [],
    js: [{ label: "webslides.js (lokal)", code: '<script src="js/webslides.js"></script>\\n<script>window.ws = new WebSlides();</script>' }],
    example: '<main role="main"><article id="webslides"><section class="aligncenter"><div class="wrap"><h1>WebSlides Navigation</h1><p>Nutze die Pfeiltasten â†”ï¸Ž</p></div></section></article></main>',
    playground: []
  },
  {
    id: "svg-icons",
    name: "WebSlides SVG Icons",
    tag: "Icons",
    categories: ["icons"],
    thumb: "IC",
    description: "Leichtgewichtige Icon-Symbole. BenÃ¶tigt svg-icons.css & svg-icons.js im Projekt.",
    css: [{ label: "svg-icons.css (lokal)", code: '<link rel="stylesheet" href="css/svg-icons.css">' }],
    js: [{ label: "svg-icons.js (lokal)", code: '<script defer src="js/svg-icons.js"></script>' }],
    example: '<svg class="fa-github" style="width:48px;height:48px"><use xlink:href="#fa-github"></use></svg> <span style="margin-left:8px">â€” Beispiel-Icon</span>',
    playground: []
  },
  {
    id: "animate-css",
    name: "Animate.css",
    tag: "Animation",
    categories: ["animation"],
    thumb: "AN",
    description: "Fertige CSS-Animationen. Nutze Klassen wie animate__animated animate__fadeInUp.",
    css: [{ label: "CDN", code: '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">' }],
    js: [],
    example: '<h2 class="animate__animated animate__fadeInUp" style="font-family:system-ui">Hallo Animate.css</h2>',
    playground: []
  },
  {
    id: "highlight-js",
    name: "Highlight.js",
    tag: "Code",
    categories: ["code"],
    thumb: "HL",
    description: "Syntax-Highlighting fÃ¼r CodeblÃ¶cke. CSS-Theme + Script laden und hljs.highlightAll() aufrufen.",
    css: [{ label: "CDN Theme", code: '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">' }],
    js: [{ label: "CDN Script", code: '<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>\\n<script>hljs.highlightAll();</script>' }],
    example: '<pre><code class="language-css">.title { font-weight: 700; }</code></pre>',
    playground: []
  },
  {
    id: "youtube",
    name: "YouTube Embed",
    tag: "Video",
    categories: ["video"],
    thumb: "YT",
    description: "Videos per <iframe> einbinden.",
    css: [], js: [],
    example: '<div style="position:relative;padding-top:56.25%"><iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video" allowfullscreen style="position:absolute;left:0;top:0;width:100%;height:100%;border:0"></iframe></div>',
    playground: [
      {label:"YouTube Video-ID", name:"ytid", placeholder:"z.â€¯B. dQw4w9WgXcQ"}
    ]
  },
  {
    id: "chartjs",
    name: "Chart.js",
    tag: "Charts",
    categories: ["charts"],
    thumb: "CH",
    description: "Einfache Charts per Canvas. Praktisch fÃ¼r KPI-Slides.",
    css: [],
    js: [
      { label: "CDN Script", code: '<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>' },
      { label: "Init", code: '<script>const ctx=document.getElementById("c");new Chart(ctx,{type:"line",data:{labels:["Q1","Q2","Q3","Q4"],datasets:[{label:"Umsatz",data:[12,19,7,15]}]}});</script>' }
    ],
    example: '<canvas id="c" width="400" height="220"></canvas>',
    playground: [
      {label:"Labels (kommasepariert)", name:"labels", placeholder:"Q1,Q2,Q3,Q4"},
      {label:"Werte (kommasepariert)", name:"values", placeholder:"12,19,7,15"}
    ]
  },
  {
    id: "lottie",
    name: "Lottie (lottie-web)",
    tag: "Lottie",
    categories: ["lottie"],
    thumb: "LO",
    description: "JSON-Animationen in hoher QualitÃ¤t.",
    css: [],
    js: [
      { label: "CDN Script", code: '<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>' },
      { label: "Init", code: '<script>lottie.loadAnimation({container:document.getElementById("lottie"),renderer:"svg",loop:true,autoplay:true,path:"/path/to/animation.json"});</script>' }
    ],
    example: '<div id="lottie" style="width:200px;height:200px"></div>',
    playground: [
      {label:"Pfad zur JSON", name:"json", placeholder:"/animation.json"}
    ]
  }
];

// --- State
let STATE = {
  filter: "all",
  query: "",
  theme: (localStorage.getItem("theme") || "dark")
};
if (STATE.theme === "light") document.documentElement.setAttribute("data-theme","light");

function buildSrcDoc(cssTags = [], jsTags = [], body = "") {
  const css = cssTags.join("\\n");
  const js = jsTags.join("\\n");
  return `<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'>${css}<style>body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:grid;place-items:center;min-height:100vh;margin:0;padding:24px;background:#0b0b0b;color:#f5f5f5}</style></head><body>${body}${js}</body></html>`;
}

function copy(text, btn){
  navigator.clipboard.writeText(text).then(()=>{
    const o=btn.textContent; btn.textContent="Kopiert âœ”"; setTimeout(()=>btn.textContent=o,1100);
  });
}

function card(item){
  const cssSnip = (item.css||[]).map(c=>`
    <div class="snippet">
      <div class="bar"><span>${c.label}</span><button class="btn copy" data-code="${encodeURIComponent(c.code)}">Code kopieren</button></div>
      <pre><code>${c.code.replace(/</g,'&lt;')}</code></pre>
    </div>`).join("");
  const jsSnip = (item.js||[]).map(j=>`
    <div class="snippet">
      <div class="bar"><span>${j.label}</span><button class="btn copy" data-code="${encodeURIComponent(j.code)}">Code kopieren</button></div>
      <pre><code>${j.code.replace(/</g,'&lt;')}</code></pre>
    </div>`).join("");
  const ex = `<div class="example"><code>${item.example.replace(/</g,'&lt;')}</code></div>`;

  // Playground form (optional)
  const pg = item.playground && item.playground.length ? `
    <div class="playground" data-id="${item.id}">
      <div style="font-weight:600;margin-bottom:6px">Playground</div>
      ${item.playground.map(f=>`
        <label style="display:block;margin:6px 0 4px">${f.label}</label>
        <input name="${f.name}" placeholder="${f.placeholder||''}">
      `).join('')}
      <div class="actions">
        <button class="btn pg-generate">Snippet generieren</button>
      </div>
      <div class="snippet" style="display:none;margin-top:8px">
        <div class="bar"><span>Generiertes HTML</span><button class="btn copy">Code kopieren</button></div>
        <pre><code></code></pre>
      </div>
    </div>` : "";

  return `<div class="card" data-id="${item.id}" data-cats="${item.categories.join(',')}">
    <div class="thumb"><div>${item.thumb}<div><small>${item.tag}</small></div></div></div>
    <div class="content">
      <div class="title"><h3>${item.name}<span class="tag">${item.tag}</span></h3>
        <div class="actions"><button class="btn preview">Preview</button></div>
      </div>
      <div class="desc">${item.description}</div>
      ${item.css?.length?`<div class="rowlabel">CSS</div>${cssSnip}`:''}
      ${item.js?.length?`<div class="rowlabel">JavaScript</div>${jsSnip}`:''}
      <div class="rowlabel">HTML Beispiel</div>${ex}
      ${pg}
    </div>
  </div>`;
}

function render(){
  const grid = document.getElementById('grid');
  const empty = document.getElementById('empty');
  const items = DATA.filter(d=>{
    const q = STATE.query.toLowerCase();
    const matchesQuery = (d.name + d.tag + d.description).toLowerCase().includes(q);
    const matchesFilter = STATE.filter==='all' || d.categories.includes(STATE.filter);
    return matchesQuery && matchesFilter;
  });
  grid.innerHTML = items.map(card).join('');
  empty.style.display = items.length ? 'none' : 'block';

  // Copy buttons
  grid.querySelectorAll('.copy').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const code = btn.dataset.code ? decodeURIComponent(btn.dataset.code) :
        btn.closest('.snippet').querySelector('pre').innerText;
      copy(code, btn);
    });
  });

  // Preview modal
  grid.querySelectorAll('.preview').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const card = btn.closest('.card');
      const id = card.dataset.id;
      const item = DATA.find(x=>x.id===id);
      const css = (item.css||[]).map(x=>x.code);
      const js  = (item.js||[]).map(x=>x.code);
      const src = buildSrcDoc(css, js, item.example);
      document.getElementById('modal-title').textContent = item.name + " â€“ Preview";
      document.getElementById('modal-frame').srcdoc = src;
      document.getElementById('modal').style.display = 'flex';
    });
  });

  // Playground logic
  grid.querySelectorAll('.playground').forEach(box=>{
    box.querySelector('.pg-generate').addEventListener('click', ()=>{
      const id = box.dataset.id;
      const item = DATA.find(x=>x.id===id);
      let html = "";
      if(id==="youtube"){
        const idv = box.querySelector('input[name="ytid"]').value.trim()||"dQw4w9WgXcQ";
        html = `<div style="position:relative;padding-top:56.25%"><iframe src="https://www.youtube.com/embed/${idv}" title="YouTube video" allowfullscreen style="position:absolute;left:0;top:0;width:100%;height:100%;border:0"></iframe></div>`;
      } else if(id==="chartjs"){
        const labels=(box.querySelector('input[name="labels"]').value||"Q1,Q2,Q3,Q4").split(',').map(s=>s.trim());
        const values=(box.querySelector('input[name="values"]').value||"12,19,7,15").split(',').map(s=>s.trim()).join(',');
        html = `<canvas id="c" width="400" height="220"></canvas>\n<script>const ctx=document.getElementById("c");new Chart(ctx,{type:"line",data:{labels:${JSON.stringify(labels)},datasets:[{label:"Serie",data:[${values}]}]}});</script>`;
      } else if(id==="lottie"){
        const path = box.querySelector('input[name="json"]').value.trim()||"/animation.json";
        html = `<div id="lottie" style="width:200px;height:200px"></div>\n<script>lottie.loadAnimation({container:document.getElementById("lottie"),renderer:"svg",loop:true,autoplay:true,path:"${path}"});</script>`;
      }
      const snip = box.querySelector('.snippet');
      snip.style.display = 'block';
      snip.querySelector('pre').innerText = html;
    });
  });
}

document.getElementById('search').addEventListener('input', (e)=>{ STATE.query = e.target.value; render(); });
document.querySelectorAll('.chip').forEach(c=>c.addEventListener('click',()=>{
  document.querySelectorAll('.chip').forEach(x=>x.classList.remove('active'));
  c.classList.add('active'); STATE.filter = c.dataset.filter; render();
}));
document.getElementById('close').addEventListener('click',()=>{ document.getElementById('modal').style.display='none'; document.getElementById('modal-frame').srcdoc=""; });

// Theme toggle
document.getElementById('theme').addEventListener('click',()=>{
  const cur = document.documentElement.getAttribute('data-theme')==='light' ? 'dark' : 'light';
  if(cur==='light') document.documentElement.setAttribute('data-theme','light'); else document.documentElement.removeAttribute('data-theme');
  localStorage.setItem('theme', cur);
});

// Simple QR code generator (tiny implementation)
(function qr(){
  const canvas=document.getElementById('qrc'); if(!canvas) return;
  const url = location.href;
  // super tiny pseudo-QR (placeholder pattern) for offline use â€“ not a real QR encoder
  const ctx=canvas.getContext('2d'); const s=canvas.width; ctx.fillStyle='#000'; ctx.fillRect(0,0,s,s); ctx.fillStyle='#fff';
  // draw finder-like squares
  function box(x,y){ctx.fillRect(x,y,22,22);ctx.fillStyle='#000';ctx.fillRect(x+4,y+4,14,14);ctx.fillStyle='#fff';ctx.fillRect(x+8,y+8,6,6);ctx.fillStyle='#fff';}
  box(8,8); box(s-30,8); box(8,s-30);
  // draw pseudo data pattern from url hash
  let h=0; for(let i=0;i<url.length;i++) h=(h*33+url.charCodeAt(i))>>>0;
  for(let y=40;y<s-8;y+=6){ for(let x=8;x<s-8;x+=6){ if(((x*y+h)>>3)&1) ctx.fillRect(x,y,3,3);} }
})();

render();
</script>
</body>
</html>
