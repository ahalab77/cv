<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://webslides.tv/static/css/webslides.css">
  <link rel="stylesheet" href="https://webslides.tv/static/css/svg-icons.css">
  <title>alexhatchl — portfolio</title>
</head>
<body>
<main role="main">
  <article id="webslides">
  <!-- 80s CAR · B/W PIXEL ART · RAIN + CINEMATIC LIGHT -->
<section class="fullscreen aligncenter" id="eighties-car">
  <style>
    #eighties-car { background:#fff; }
    #eighties-car canvas{
      position:absolute; inset:0; width:100%; height:100%;
      image-rendering: pixelated; image-rendering: crisp-edges;
      display:block; pointer-events:none;
    }
  </style>
  <canvas></canvas>

  <script>
  (function(){
    const section = document.getElementById('eighties-car');
    const cvs = section.querySelector('canvas');
    const ctx  = cvs.getContext('2d', { alpha:false });
    ctx.imageSmoothingEnabled = false;

    // Logische "Low-Res": 16:9
    const W = 192, H = 108;
    cvs.width = W; cvs.height = H;

    // ---------- Helpers ----------
    function dot(x,y){ ctx.fillRect(x|0,y|0,1,1); }
    function rect(x,y,w,h,color='#000'){ ctx.fillStyle=color; ctx.fillRect(x|0,y|0,w|0,h|0); }
    // Dither-Füllung: "hell" = wenige Punkte, "dunkel" = mehr Punkte
    function ditherRect(x,y,w,h,level=2,phase=0){
      // level: 0 (weiß) .. 5 (fast schwarz)
      for(let j=0;j<h;j++){
        for(let i=0;i<w;i++){
          const m = (i + j + phase) & 7; // 0..7 Muster
          const th = [ -1,0,1,2,3,4,5,6 ][level]; // Schwellwert je "Helligkeit"
          if(m <= th) dot(x+i, y+j);
        }
      }
    }
    function line(x1,y1,x2,y2){
      let dx=Math.abs(x2-x1), sx=x1<x2?1:-1;
      let dy=-Math.abs(y2-y1), sy=y1<y2?1:-1;
      let err=dx+dy, e2;
      while(true){
        dot(x1,y1);
        if(x1===x2 && y1===y2) break;
        e2 = 2*err;
        if(e2>=dy){ err+=dy; x1+=sx; }
        if(e2<=dx){ err+=dx; y1+=sy; }
      }
    }

    // ---------- Szene ----------
    // Regen-Partikel (diagonal), werden recycelt
    const RAIN_COUNT = 160;
    const rain = Array.from({length:RAIN_COUNT}, () => ({
      x: Math.random()*W, y: Math.random()*H, v: 0.6 + Math.random()*0.9
    }));

    function drawRain(t){
      // Diagonaler Regen (↘), auf Weiß: dünne schwarze Striche
      ctx.fillStyle = '#000';
      for(const r of rain){
        const len = 2; // Länge der Strichel
        // leichte Zitterbewegung (Wind)
        const jitter = Math.sin((r.y + t*0.003))*0.5;
        line(r.x|0, r.y|0, (r.x+len + jitter)|0, (r.y+len*1.6)|0);
        r.x += (0.15 + jitter*0.02);
        r.y += r.v;
        if(r.y > H+4){ r.y = -4; r.x = Math.random()*W; }
        if(r.x > W+4){ r.x = -4; }
      }
    }

    function drawGround(t){
      // Boden leicht schattiert (Pfützen/Noise) per Dither-Balken
      ditherRect(0, 78, W, 4, 1, (t/80|0)%8);
      ditherRect(0, 82, W, 2, 2, (t/60|0)%8);
      // Horizonte/Guides ganz dezent
      for(let x=0;x<W;x+=16) dot(x, 86);
    }

    function drawHeadlightCone(cx, cy, angleRad, length, spread){
      // Kegelförmiger Lichtkegel als invertiertes Dither (dünner besetzt = heller)
      // Auf weißem Grund: weniger Punkte = heller → use niedrige level innen, höhere außen
      for(let i=0;i<length;i+=2){
        const w = (i/length)*spread;
        const dx = Math.cos(angleRad)*i;
        const dy = Math.sin(angleRad)*i;
        const x = cx + dx - w/2;
        const y = cy + dy - w/2;
        const lvl = Math.min(5, Math.max(0, 3 - (i/length)*3)); // 0..3
        ditherRect(x, y, w, w, lvl, (i/2)%8);
      }
    }

    function drawCar(t){
      // Position & Maße (zentriert)
      const cx = W/2, cy = 72;
      // Karosserie: 80s Keilform (Coupé/GT)
      // Grundkörper
      ditherRect(cx-34, cy-10, 68, 16, 4, (t/50|0)%8); // dunkler Körper
      // Dachlinie (Keil)
      rect(cx-22, cy-16, 34, 6);            // Dach
      rect(cx+12, cy-10, 12, 4);            // Heckstufe
      // Haube (leichter)
      ditherRect(cx-34, cy-12, 30, 6, 3, (t/40|0)%8);

      // Fenster (schwarz)
      rect(cx-16, cy-15, 22, 5);
      rect(cx+7,  cy-12, 8, 3);

      // Stoßfänger vorne + hinten
      rect(cx-36, cy+2, 14, 2);  // Front
      rect(cx+24, cy+2, 12, 2);  // Heck

      // Räder
      ditherRect(cx-24, cy+4, 10, 4, 5);
      ditherRect(cx+12,  cy+4, 10, 4, 5);

      // Scheinwerfer (schwarz = "Linse", darum herum Lichtkegel)
      rect(cx-35, cy-4, 2, 2); // links
      rect(cx-33, cy-4, 1, 2);
      rect(cx-31, cy-4, 1, 2);

      // CINEMATIC LIGHT · zwei Kegel leicht aufgefächert nach rechts unten
      drawHeadlightCone(cx-32, cy-3, Math.PI*1.97, 60, 22);
      drawHeadlightCone(cx-32, cy-3, Math.PI*2.02, 60, 18);

      // leichte Reflexe/Panels als dünne Linien
      line(cx-18, cy-8, cx+8, cy-9);
      line(cx-10, cy-2, cx+14, cy-3);

      // Spiegel / kleine Details
      rect(cx-6, cy-12, 2, 1);
      rect(cx-28, cy-10, 2, 1);
    }

    function drawReflection(t){
      // Spiegelung unter dem Auto (untere Kante) – schwach gedithert
      const y0 = 78;
      ditherRect(W/2-30, y0+2, 60, 6, 1, (t/70|0)%8);
      // leichte „Wellen“ im nassen Boden
      for(let i=0;i<5;i++){
        const y = y0 + 3 + i*2 + Math.sin((t*0.002)+i)*0.6;
        for(let x=W/2-30; x<W/2+30; x+=3){
          if(((x + i) & 3) === 0) dot(x, y);
        }
      }
    }

    let tPrev = performance.now();
    function frame(tNow){
      const dt = (tNow - tPrev)/1000; tPrev = tNow;
      // Weißer Grund (leerer Screen)
      ctx.fillStyle = '#fff';
      ctx.fillRect(0,0,W,H);

      drawGround(tNow);
      drawCar(tNow);
      drawReflection(tNow);
      drawRain(tNow);

      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);

    // robust bei resize/slide-change (Canvas skaliert via CSS)
    const ro = new ResizeObserver(()=>{ /* no-op: low-res bleibt, CSS skaliert */ });
    ro.observe(section);
    document.addEventListener('ws:slide-change', ()=>{ /* no-op */ });
  })();
  </script>
</section>

  </article>
</main>
<script src="https://webslides.tv/static/js/webslides.js"></script>
<script>window.ws=new WebSlides();</script>
<script defer src="https://webslides.tv/static/js/svg-icons.js"></script>
</body>
</html>
