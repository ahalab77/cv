<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>alexhatchl — portfolio</title>

  <!-- WebSlides CSS -->
  <link rel="stylesheet" href="https://webslides.tv/static/css/webslides.css" />
  <link rel="stylesheet" href="https://webslides.tv/static/css/svg-icons.css" />

  <style>
    #water-intro{
      position:relative !important;
      min-height:100vh !important;
      height:100vh !important;
      overflow:hidden;
      background:#06071a;
    }
    #water-intro canvas{
      position:absolute; inset:0; width:100%; height:100%;
      display:block; image-rendering:pixelated; image-rendering:crisp-edges;
    }
    #water-intro .overlay{
      position:relative; z-index:3; height:100%;
      display:grid; place-items:center; color:#fff;
      text-shadow:0 2px 6px rgba(0,0,0,.7);
      font-size:3.5rem;
    }
  </style>
</head>
<body>
<main role="main">
  <article id="webslides">

    <!-- SLIDE 1 -->
    <section class="fullscreen aligncenter" id="water-intro">
      <canvas id="water-canvas"></canvas>
      <canvas id="plants-canvas"></canvas>
      <div class="overlay">alexhatchl</div>
    </section>

  </article>
</main>

<script src="https://webslides.tv/static/js/webslides.js" defer></script>

<script defer>
window.addEventListener('load', () => {
  window.ws = new WebSlides();

  const water = document.getElementById("water-canvas");
  const plants = document.getElementById("plants-canvas");
  const wtx = water.getContext("2d");
  const ptx = plants.getContext("2d");
  wtx.imageSmoothingEnabled = false;
  ptx.imageSmoothingEnabled = false;

  function fit(){
    const W = innerWidth, H = innerHeight;
    water.width=W; water.height=H;
    plants.width=W; plants.height=H;
  }
  fit();
  addEventListener("resize", fit, {passive:true});

  // -------------------- Pflanzen-Silhouetten --------------------
  function drawPlants(){
    const W=plants.width, H=plants.height;
    ptx.clearRect(0,0,W,H);
    ptx.fillStyle="#000";
    ptx.globalAlpha=0.9;

    // einfache Silhouetten per Path2D (linke Seite)
    const leftPlant = new Path2D();
    leftPlant.moveTo(W*0.1,H);
    leftPlant.lineTo(W*0.08,H*0.7);
    leftPlant.quadraticCurveTo(W*0.05,H*0.5,W*0.1,H*0.4);
    leftPlant.lineTo(W*0.12,H*0.7);
    leftPlant.lineTo(W*0.1,H);
    ptx.fill(leftPlant);

    // rechte Seite
    const rightPlant = new Path2D();
    rightPlant.moveTo(W*0.9,H);
    rightPlant.lineTo(W*0.92,H*0.6);
    rightPlant.quadraticCurveTo(W*0.96,H*0.4,W*0.9,H*0.3);
    rightPlant.lineTo(W*0.88,H*0.65);
    rightPlant.lineTo(W*0.9,H);
    ptx.fill(rightPlant);

    // mehrere vertikale Stängel mit Blättern
    for(let i=0;i<7;i++){
      const baseX = (i<4)? W*0.05+ i*20 : W*0.85+ (i-4)*20;
      const baseY = H;
      const topY = H*0.3 + Math.random()*H*0.3;
      ptx.beginPath();
      ptx.moveTo(baseX,baseY);
      ptx.quadraticCurveTo(baseX-20, (baseY+topY)/2, baseX, topY);
      ptx.strokeStyle="#000";
      ptx.lineWidth=6;
      ptx.stroke();
    }
  }
  drawPlants();

  // -------------------- Wasser + Reflexe --------------------
  const buf = document.createElement("canvas");
  const btx = buf.getContext("2d");
  const BUF_W = 240;
  let BUF_H = 135;

  function render(t){
    const W=water.width, H=water.height;
    BUF_H = Math.round(BUF_W*H/W);
    buf.width=BUF_W; buf.height=BUF_H;
    const img = btx.getImageData(0,0,BUF_W,BUF_H);
    const d = img.data;

    for(let y=0;y<BUF_H;y++){
      for(let x=0;x<BUF_W;x++){
        const i=(y*BUF_W+x)*4;
        const ny=y/BUF_H, nx=x/BUF_W;
        // Basis Wasserfarbe
        let r=8, g=10, b=32;
        // horizontale Streifen (Reflexe)
        const wave = Math.sin(nx*80 + t*0.003) + Math.sin(nx*50 - t*0.002);
        const mask = Math.sin(y*0.3 + t*0.004 + wave*0.5);
        if(mask>0.6){
          const glow = (mask-0.6)*3.5;
          r=200+55*Math.random(); g=50+glow*150; b=80+glow*60;
        }
        d[i]=r; d[i+1]=g; d[i+2]=b; d[i+3]=255;
      }
    }
    btx.putImageData(img,0,0);

    // Buffer → Canvas scaled
    const sR=BUF_W/BUF_H;
    let dw=W, dh=Math.round(W/sR); if(dh<H){ dh=H; dw=Math.round(H*sR); }
    const dx=Math.round((W-dw)/2), dy=Math.round((H-dh)/2);
    wtx.imageSmoothingEnabled=false;
    wtx.drawImage(buf,0,0,BUF_W,BUF_H, dx,dy,dw,dh);

    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);
});
</script>
</body>
</html>
